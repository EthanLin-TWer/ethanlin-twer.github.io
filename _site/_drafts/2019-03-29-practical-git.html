<h2 id="目录">目录</h2>

<p>基本场景</p>

<ul>
  <li>如何经常与主干保持同步？ <code class="highlighter-rouge">git rebase master</code></li>
  <li>如何切换到一条新的分支上工作？ <code class="highlighter-rouge">git checkout -b &lt;branch&gt;</code></li>
  <li>rebase 过主分支以后，如何同步到远端分支？ <code class="highlighter-rouge">git push -f origin &lt;branch&gt;</code></li>
  <li>提交比较琐碎，如何在 push 前合并类似提交？ <code class="highlighter-rouge">git rebase -i .p.f</code></li>
  <li>如何修改两个提交前的提交信息？ <code class="highlighter-rouge">git rebase -i .r</code></li>
  <li>在做一件主事的时候，突然要做另外一件不相干，但是随时想做的事？ <code class="highlighter-rouge">git commit --fixup &lt;hash&gt;</code> <code class="highlighter-rouge">git rebase -i --autosquash</code> / <code class="highlighter-rouge">git rebase - i</code> 也可以啦</li>
  <li>merge 要卡号限制，无法正常提交？ <code class="highlighter-rouge">git merge --squash &lt;branch&gt;</code> / <code class="highlighter-rouge">git rebase -i</code> 也可以解决。看来 <code class="highlighter-rouge">git rebase -i</code> 真是 push 之前最最强大的工具</li>
</ul>

<p>复杂场景</p>

<ul>
  <li>叶豪那个场景？时间太过久远，导致有点忘记了</li>
  <li>很久没合并主分支，并且已经合并出错、修复了大量冲突，此时 master 又有更新，如果再 merge 一次，将会极为混乱，如何处理？</li>
  <li>以 merge 方式合并 release 分支，需要多次合并的话怎么办呢</li>
  <li>已经在分支上多次merge了local master，但是还没push到remote master，如何把分支摘干净，让它重新线性基于master以便后面rebasing？十步法。</li>
</ul>

<p>配套实践</p>

<ul>
  <li>check-in dance
    <ul>
      <li>run local build</li>
      <li>commit</li>
      <li>check ci</li>
      <li>git pull –rebase</li>
      <li>run local build(automated by git hooks)</li>
      <li>git push</li>
      <li>check ci(necessary cause ci run something else)</li>
    </ul>
  </li>
  <li>not good behaviour
    <ul>
      <li>commit</li>
      <li>git pull –rebase</li>
      <li>gp</li>
    </ul>
  </li>
  <li>github flow / trunk based development</li>
  <li>tasking</li>
</ul>

<p>小步有啥好处呢？</p>

<ul>
  <li>revert 起来非常方便 - 通常 revert 场景也只会出现在主干分支、小步提交的团队，大步的提交没法 revert，不主干分支 revert 往往也极麻烦，能 PR 成功说明已经经过繁重的流程</li>
  <li>消灭调试。上一个提交，你一定要保证可以运行；有了这个保证以后，再也不会本地一坨文件，不好好测试一番根本无法保证功能正确，并且不知道应该提交哪些；做错了，随时切换掉，以更小的步子重做即可，根本不需要考虑为啥会出错（JS 同一文件里 import 继承了自己的类的例子）</li>
</ul>

<h2 id="git-hooks">Git hooks</h2>

<ul>
  <li><a href="https://wilsonmar.github.io/git-hooks/">Hook sequence</a></li>
  <li><a href="https://devopedia.org/git-hooks">A nice diagram</a></li>
  <li><a href="https://www.analysisandsolutions.com/code/git-hooks-summary-cheat-sheet.htm">Hook overview</a></li>
  <li><a href="https://longair.net/blog/2011/04/09/missing-git-hooks-documentation/">The Missing Git Hooks Documentation</a></li>
</ul>
